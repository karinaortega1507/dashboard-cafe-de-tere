<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Pol√©mica en Redes: Bol√≥n de Tere</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 20px;
        }
        .dashboard-container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #ffffff;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .section {
            margin-bottom: 30px;
            padding: 15px;
            border-left: 5px solid #3498db;
            background-color: #ecf0f1;
            border-radius: 4px;
        }
        h2 {
            color: #3498db;
            margin-top: 0;
        }
        .metric-card {
            background-color: #ffffff;
            padding: 15px;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            margin-bottom: 10px;
            border: 1px solid #ddd;
        }
        .metric-card strong {
            color: #e74c3c;
            font-size: 1.2em;
        }
        .grid-3 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        ul li {
            padding: 5px 0;
            border-bottom: 1px dotted #ccc;
        }
        .conclusion {
            background-color: #2ecc71;
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            font-size: 1.1em;
            margin-top: 40px;
        }
    </style>
</head>
<body>

<div class="dashboard-container">
    <h1>Dashboard de An√°lisis de Contenido en Redes Sociales üê¶</h1>
    
    <div class="section" id="analysis-section">
        <h2>üìù Resumen del An√°lisis Tem√°tico</h2>
        </div>
    
    <div class="section" id="metrics-section">
        <h2>üìà M√©tricas Descriptivas de Publicaciones</h2>
        <div class="grid-3" id="metrics-cards">
            </div>
    </div>

    <div class="section" id="entities-section">
        <h2>üë§ Lugares, Personas y Marcas Mencionadas</h2>
        <div class="grid-3" id="entities-content">
            </div>
    </div>
    
    <hr>
    
    <div class="conclusion">
        <p><strong>Conclusi√≥n Clave:</strong> La conversaci√≥n en Twitter se centra en la **pol√©mica del "Bol√≥n de Tere"**, contrastando la calidad y el precio de este producto con otros competidores en **Guayaquil, Ecuador**. Las menciones de medios (El Universo) y figuras p√∫blicas (Ewan McGregor, Teresa Castro Mendoza) impulsaron el debate social.</p>
    </div>

</div>

<script>
    // Asumiendo que el JSON se carga desde un archivo 'result.json' accesible
    // Para esta demostraci√≥n, el contenido del JSON se inserta directamente como una variable.
    // **Nota:** En una implementaci√≥n real, usar√≠as 'fetch()' para cargar el archivo.
    const insightsData = {
        "describe_matrix": {
            "count": {
                "favorite_count": 1198.0,
                "id": 1199.0,
                "retweet_count": 1198.0,
                "user.followers_count": 1198.0,
                "user.friends_count": 1198.0
            },
            "mean": {
                "favorite_count": 12.20,
                "id": 1.1909e+18,
                "retweet_count": 33.93,
                "user.followers_count": 5046.37,
                "user.friends_count": 1021.63
            },
            "std": {
                "favorite_count": 104.53,
                "id": 3.44e+16,
                "retweet_count": 815.06,
                "user.followers_count": 72793.24,
                "user.friends_count": 6446.56
            }
        },
        "entities": [
            { "entity": "Caf√© de Tere", "type": "Organizaci√≥n/Negocio", "relevance": "Alta" },
            { "entity": "Bol√≥n de Tere", "type": "Producto", "relevance": "Alta" },
            { "entity": "Teresa Castro Mendoza", "type": "Persona", "relevance": "Alta" },
            { "entity": "Guayaquil", "type": "Lugar", "relevance": "Alta" },
            { "entity": "Ecuador", "type": "Lugar", "relevance": "Alta" },
            { "entity": "Sweet & Coffee", "type": "Organizaci√≥n/Negocio", "relevance": "Media" },
            { "entity": "Naturissimo", "type": "Organizaci√≥n/Negocio", "relevance": "Media" },
            { "entity": "El Universo", "type": "Medio", "relevance": "Media" },
            { "entity": "CONAIE", "type": "Organizaci√≥n", "relevance": "Baja" },
            { "entity": "Ewan McGregor", "type": "Persona", "relevance": "Baja" }
        ],
        "analysis": "El texto es una agregaci√≥n masiva de publicaciones en Twitter centradas en la pol√©mica sobre el Caf√© de Tere y su producto emblem√°tico, el ‚ÄúBol√≥n de Tere‚Äù. Las entidades m√°s relevantes son el propio negocio (Caf√© de Tere), su producto (Bol√≥n de Tere) y su fundadora (Teresa Castro Mendoza), adem√°s de la ciudad de Guayaquil y el pa√≠s Ecuador como contexto geogr√°fico predominante. Aparecen marcas y restaurantes competidores o comparables (Sweet & Coffee, Naturissimo, Amorfino Caf√©, Rey Bol√≥n, Boloncity, Aloha Caf√©, Cyrano, Caf√© Junior, Juan Tonga) usados para contrastar calidad/precio. Medios y organizaciones como El Universo (que deton√≥ la conversaci√≥n con un reportaje) y la CONAIE se mencionan en el marco del debate social. Figuras p√∫blicas como Ewan McGregor (por su visita a GYE),..."
    };

    function generateDashboard(data) {
        // 1. Secci√≥n de An√°lisis
        const analysisSection = document.getElementById('analysis-section');
        const analysisParagraph = document.createElement('p');
        analysisParagraph.textContent = data.analysis;
        analysisSection.appendChild(analysisParagraph);

        // 2. Secci√≥n de M√©tricas
        const metricsContainer = document.getElementById('metrics-cards');
        const metrics = data.describe_matrix.mean;
        const totalCount = data.describe_matrix.count.id; // Total de publicaciones

        // Mapeo de nombres de m√©tricas para mejor visualizaci√≥n
        const metricLabels = {
            'favorite_count': 'Favs Promedio',
            'retweet_count': 'Retweets Promedio',
            'user.followers_count': 'Seguidores Promedio del Autor',
            'user.friends_count': 'Amigos/Siguiendo Promedio del Autor'
        };

        // Tarjeta de total de publicaciones
        metricsContainer.innerHTML += `
            <div class="metric-card">
                <strong>${Math.round(totalCount).toLocaleString('es')}</strong>
                <p>Total de Publicaciones Analizadas</p>
            </div>
        `;

        for (const key in metrics) {
            if (metricLabels[key]) {
                const card = document.createElement('div');
                card.classList.add('metric-card');
                const value = parseFloat(metrics[key]);
                // Mostrar solo 2 decimales y usar formato de n√∫mero local
                card.innerHTML = `
                    <strong>${value.toFixed(2).toLocaleString('es')}</strong>
                    <p>${metricLabels[key]}</p>
                `;
                metricsContainer.appendChild(card);
            }
        }
        
        // 3. Secci√≥n de Entidades
        const entitiesContainer = document.getElementById('entities-content');
        
        // Crear listas para diferentes tipos de relevancia (ejemplo simple)
        const relevanceMap = { 'Alta': [], 'Media': [], 'Baja': [] };
        data.entities.forEach(entity => {
            if (relevanceMap[entity.relevance]) {
                relevanceMap[entity.relevance].push(entity);
            }
        });
        
        // Generar listas HTML para cada grupo de relevancia
        for (const relevance in relevanceMap) {
            const entitiesList = relevanceMap[relevance];
            if (entitiesList.length > 0) {
                const listDiv = document.createElement('div');
                listDiv.innerHTML = `<h3>Relevancia ${relevance} (${entitiesList.length})</h3>`;
                const ul = document.createElement('ul');
                
                entitiesList.forEach(entity => {
                    ul.innerHTML += `<li>**${entity.entity}** (${entity.type})</li>`;
                });
                
                listDiv.appendChild(ul);
                entitiesContainer.appendChild(listDiv);
            }
        }

    }

    // Inicializar el dashboard al cargar la p√°gina
    document.addEventListener('DOMContentLoaded', () => {
        generateDashboard(insightsData);
    });
</script>

</body>
</html>